{"dependencies":[{"name":"react","loc":{"line":14,"column":21}},{"name":"prop-types","loc":{"line":18,"column":25}},{"name":"react-dom","loc":{"line":22,"column":24}},{"name":"graphql","loc":{"line":26,"column":23}},{"name":"./ExecuteButton","loc":{"line":28,"column":29}},{"name":"./ToolbarButton","loc":{"line":30,"column":29}},{"name":"./ToolbarGroup","loc":{"line":32,"column":28}},{"name":"./ToolbarMenu","loc":{"line":34,"column":27}},{"name":"./ToolbarSelect","loc":{"line":36,"column":29}},{"name":"./QueryEditor","loc":{"line":38,"column":27}},{"name":"./VariableEditor","loc":{"line":40,"column":30}},{"name":"./ResultViewer","loc":{"line":42,"column":28}},{"name":"./DocExplorer","loc":{"line":44,"column":27}},{"name":"./QueryHistory","loc":{"line":46,"column":28}},{"name":"../utility/CodeMirrorSizer","loc":{"line":48,"column":31}},{"name":"../utility/StorageAPI","loc":{"line":52,"column":26}},{"name":"../utility/getQueryFacts","loc":{"line":56,"column":29}},{"name":"../utility/getSelectedOperationName","loc":{"line":60,"column":40}},{"name":"../utility/debounce","loc":{"line":64,"column":24}},{"name":"../utility/find","loc":{"line":68,"column":20}},{"name":"../utility/fillLeafs","loc":{"line":72,"column":26}},{"name":"../utility/elementPosition","loc":{"line":74,"column":31}},{"name":"../utility/introspectionQueries","loc":{"line":76,"column":36}}],"generated":{"js":"var global = (1,eval)(\"this\");\nfunction e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function r(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function o(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function n(e){return\"object\"===(void 0===e?\"undefined\":u(e))&&\"function\"==typeof e.then}function i(e){return a(e)?new Promise(function(t,r){var o=e.subscribe(function(e){t(e),o.unsubscribe()},r,function(){r(new Error(\"no value resolved\"))})}):e}function a(e){return\"object\"===(void 0===e?\"undefined\":u(e))&&\"function\"==typeof e.subscribe}var s=(0,eval)(\"this\");Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.GraphiQL=void 0;var u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},d=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),c=require(\"react\"),h=e(c),p=require(\"prop-types\"),f=e(p),m=require(\"react-dom\"),y=e(m),v=require(\"graphql\"),g=require(\"./ExecuteButton\"),E=require(\"./ToolbarButton\"),b=require(\"./ToolbarGroup\"),S=require(\"./ToolbarMenu\"),Q=require(\"./ToolbarSelect\"),N=require(\"./QueryEditor\"),x=require(\"./VariableEditor\"),O=require(\"./ResultViewer\"),q=require(\"./DocExplorer\"),C=require(\"./QueryHistory\"),R=require(\"../utility/CodeMirrorSizer\"),T=e(R),w=require(\"../utility/StorageAPI\"),_=e(w),L=require(\"../utility/getQueryFacts\"),k=e(L),D=require(\"../utility/getSelectedOperationName\"),F=e(D),P=require(\"../utility/debounce\"),H=e(P),W=require(\"../utility/find\"),M=e(W),I=require(\"../utility/fillLeafs\"),V=require(\"../utility/elementPosition\"),B=require(\"../utility/introspectionQueries\"),z=350,j=exports.GraphiQL=function(e){function c(e){t(this,c);var o=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));if(G.call(o),\"function\"!=typeof e.fetcher)throw new TypeError(\"GraphiQL requires a fetcher function.\");o._storage=new _.default(e.storage);var n=void 0!==e.query?e.query:null!==o._storage.get(\"query\")?o._storage.get(\"query\"):void 0!==e.defaultQuery?e.defaultQuery:A,i=(0,k.default)(e.schema,n),a=void 0!==e.variables?e.variables:o._storage.get(\"variables\"),s=void 0!==e.operationName?e.operationName:(0,F.default)(null,o._storage.get(\"operationName\"),i&&i.operations);return o.state=l({schema:e.schema,query:n,variables:a,operationName:s,response:e.response,editorFlex:Number(o._storage.get(\"editorFlex\"))||1,variableEditorOpen:Boolean(a),variableEditorHeight:Number(o._storage.get(\"variableEditorHeight\"))||200,docExplorerOpen:\"true\"===o._storage.get(\"docExplorerOpen\")||!1,historyPaneOpen:\"true\"===o._storage.get(\"historyPaneOpen\")||!1,docExplorerWidth:Number(o._storage.get(\"docExplorerWidth\"))||z,isWaitingForResponse:!1,subscription:null},i),o._editorQueryID=0,\"object\"===(\"undefined\"==typeof window?\"undefined\":u(window))&&window.addEventListener(\"beforeunload\",function(){return o.componentWillUnmount()}),o}return o(c,h.default.Component),d(c,[{key:\"componentDidMount\",value:function(){void 0===this.state.schema&&this._fetchSchema(),this.codeMirrorSizer=new T.default,s.g=this}},{key:\"componentWillReceiveProps\",value:function(e){var t=this,r=this.state.schema,o=this.state.query,n=this.state.variables,i=this.state.operationName,a=this.state.response;if(void 0!==e.schema&&(r=e.schema),void 0!==e.query&&(o=e.query),void 0!==e.variables&&(n=e.variables),void 0!==e.operationName&&(i=e.operationName),void 0!==e.response&&(a=e.response),r!==this.state.schema||o!==this.state.query||i!==this.state.operationName){var s=this._updateQueryFacts(o,i,this.state.operations,r);void 0!==s&&(i=s.operationName,this.setState(s))}void 0===e.schema&&e.fetcher!==this.props.fetcher&&(r=void 0),this.setState({schema:r,query:o,variables:n,operationName:i,response:a},function(){void 0===t.state.schema&&(t.docExplorerComponent.reset(),t._fetchSchema())})}},{key:\"componentDidUpdate\",value:function(){this.codeMirrorSizer.updateSizes([this.queryEditorComponent,this.variableEditorComponent,this.resultComponent])}},{key:\"componentWillUnmount\",value:function(){this._storage.set(\"query\",this.state.query),this._storage.set(\"variables\",this.state.variables),this._storage.set(\"operationName\",this.state.operationName),this._storage.set(\"editorFlex\",this.state.editorFlex),this._storage.set(\"variableEditorHeight\",this.state.variableEditorHeight),this._storage.set(\"docExplorerWidth\",this.state.docExplorerWidth),this._storage.set(\"docExplorerOpen\",this.state.docExplorerOpen),this._storage.set(\"historyPaneOpen\",this.state.historyPaneOpen)}},{key:\"render\",value:function(){var e=this,t=h.default.Children.toArray(this.props.children),r=(0,M.default)(t,function(e){return e.type===c.Logo})||h.default.createElement(c.Logo,null),o=(0,M.default)(t,function(e){return e.type===c.Toolbar})||h.default.createElement(c.Toolbar,null,h.default.createElement(E.ToolbarButton,{onClick:this.handlePrettifyQuery,title:\"Prettify Query (Shift-Ctrl-P)\",label:\"Prettify\"}),h.default.createElement(E.ToolbarButton,{onClick:this.handleToggleHistory,title:\"Show History\",label:\"History\"})),n=(0,M.default)(t,function(e){return e.type===c.Footer}),i={WebkitFlex:this.state.editorFlex,flex:this.state.editorFlex},a={display:this.state.docExplorerOpen?\"block\":\"none\",width:this.state.docExplorerWidth},s=\"docExplorerWrap\"+(this.state.docExplorerWidth<200?\" doc-explorer-narrow\":\"\"),u={display:this.state.historyPaneOpen?\"block\":\"none\",width:\"230px\",zIndex:\"7\"},l=this.state.variableEditorOpen,d={height:l?this.state.variableEditorHeight:null};return h.default.createElement(\"div\",{className:\"graphiql-container\"},h.default.createElement(\"div\",{className:\"historyPaneWrap\",style:u},h.default.createElement(C.QueryHistory,{operationName:this.state.operationName,query:this.state.query,variables:this.state.variables,onSelectQuery:this.handleSelectHistoryQuery,storage:this._storage,queryID:this._editorQueryID},h.default.createElement(\"div\",{className:\"docExplorerHide\",onClick:this.handleToggleHistory},\"✕\"))),h.default.createElement(\"div\",{className:\"editorWrap\"},h.default.createElement(\"div\",{className:\"topBarWrap\"},h.default.createElement(\"div\",{className:\"topBar\"},r,h.default.createElement(g.ExecuteButton,{isRunning:Boolean(this.state.subscription),onRun:this.handleRunQuery,onStop:this.handleStopQuery,operations:this.state.operations}),o),!this.state.docExplorerOpen&&h.default.createElement(\"button\",{className:\"docExplorerShow\",onClick:this.handleToggleDocs},\"Docs\")),h.default.createElement(\"div\",{ref:function(t){e.editorBarComponent=t},className:\"editorBar\",onDoubleClick:this.handleResetResize,onMouseDown:this.handleResizeStart},h.default.createElement(\"div\",{className:\"queryWrap\",style:i},h.default.createElement(N.QueryEditor,{ref:function(t){e.queryEditorComponent=t},schema:this.state.schema,value:this.state.query,onEdit:this.handleEditQuery,onHintInformationRender:this.handleHintInformationRender,onClickReference:this.handleClickReference,onPrettifyQuery:this.handlePrettifyQuery,onRunQuery:this.handleEditorRunQuery,editorTheme:this.props.editorTheme}),h.default.createElement(\"div\",{className:\"variable-editor\",style:d},h.default.createElement(\"div\",{className:\"variable-editor-title\",style:{cursor:l?\"row-resize\":\"n-resize\"},onMouseDown:this.handleVariableResizeStart},\"Query Variables\"),h.default.createElement(x.VariableEditor,{ref:function(t){e.variableEditorComponent=t},value:this.state.variables,variableToType:this.state.variableToType,onEdit:this.handleEditVariables,onHintInformationRender:this.handleHintInformationRender,onPrettifyQuery:this.handlePrettifyQuery,onRunQuery:this.handleEditorRunQuery,editorTheme:this.props.editorTheme}))),h.default.createElement(\"div\",{className:\"resultWrap\"},this.state.isWaitingForResponse&&h.default.createElement(\"div\",{className:\"spinner-container\"},h.default.createElement(\"div\",{className:\"spinner\"})),h.default.createElement(O.ResultViewer,{ref:function(t){e.resultComponent=t},value:this.state.response,editorTheme:this.props.editorTheme,ResultsTooltip:this.props.ResultsTooltip}),n))),h.default.createElement(\"div\",{className:s,style:a},h.default.createElement(\"div\",{className:\"docExplorerResizer\",onDoubleClick:this.handleDocsResetResize,onMouseDown:this.handleDocsResizeStart}),h.default.createElement(q.DocExplorer,{ref:function(t){e.docExplorerComponent=t},schema:this.state.schema},h.default.createElement(\"div\",{className:\"docExplorerHide\",onClick:this.handleToggleDocs},\"✕\"))))}},{key:\"getQueryEditor\",value:function(){return this.queryEditorComponent.getCodeMirror()}},{key:\"getVariableEditor\",value:function(){return this.variableEditorComponent.getCodeMirror()}},{key:\"refresh\",value:function(){this.queryEditorComponent.getCodeMirror().refresh(),this.variableEditorComponent.getCodeMirror().refresh(),this.resultComponent.getCodeMirror().refresh()}},{key:\"autoCompleteLeafs\",value:function(){var e=(0,I.fillLeafs)(this.state.schema,this.state.query,this.props.getDefaultFieldNames),t=e.insertions,r=e.result;if(t&&t.length>0){var o=this.getQueryEditor();o.operation(function(){var e=o.getCursor(),n=o.indexFromPos(e);o.setValue(r);var i=0,a=t.map(function(e){var t=e.index,r=e.string;return o.markText(o.posFromIndex(t+i),o.posFromIndex(t+(i+=r.length)),{className:\"autoInsertedLeaf\",clearOnEnter:!0,title:\"Automatically added leaf fields\"})});setTimeout(function(){return a.forEach(function(e){return e.clear()})},7e3);var s=n;t.forEach(function(e){var t=e.index,r=e.string;t<n&&(s+=r.length)}),o.setCursor(o.posFromIndex(s))})}return r}},{key:\"_fetchSchema\",value:function(){var e=this,t=this.props.fetcher,r=i(t({query:B.introspectionQuery}));n(r)?r.then(function(e){if(e.data)return e;var o=i(t({query:B.introspectionQuerySansSubscriptions}));if(!n(r))throw new Error(\"Fetcher did not return a Promise for introspection.\");return o}).then(function(t){if(void 0===e.state.schema)if(t&&t.data){var r=(0,v.buildClientSchema)(t.data),o=(0,k.default)(r,e.state.query);e.setState(l({schema:r},o))}else{var n=\"string\"==typeof t?t:JSON.stringify(t,null,2);e.setState({schema:null,response:n})}}).catch(function(t){e.setState({schema:null,response:t&&String(t.stack||t)})}):this.setState({response:\"Fetcher did not return a Promise for introspection.\"})}},{key:\"_fetchQuery\",value:function(e,t,r,o){var i=this,s=this.props.fetcher,l=null;try{l=t&&\"\"!==t.trim()?JSON.parse(t):null}catch(e){throw new Error(\"Variables are invalid JSON: \"+e.message+\".\")}if(\"object\"!==(void 0===l?\"undefined\":u(l)))throw new Error(\"Variables are not a JSON object.\");var d=s({query:e,variables:l,operationName:r});if(!n(d)){if(a(d)){return d.subscribe({next:o,error:function(e){i.setState({isWaitingForResponse:!1,response:e&&String(e.stack||e),subscription:null})},complete:function(){i.setState({isWaitingForResponse:!1,subscription:null})}})}throw new Error(\"Fetcher did not return Promise or Observable.\")}d.then(o).catch(function(e){i.setState({isWaitingForResponse:!1,response:e&&String(e.stack||e)})})}},{key:\"_runQueryAtCursor\",value:function(){if(this.state.subscription)this.handleStopQuery();else{var e=void 0,t=this.state.operations;if(t){var r=this.getQueryEditor();if(r.hasFocus())for(var o=r.getCursor(),n=r.indexFromPos(o),i=0;i<t.length;i++){var a=t[i];if(a.loc.start<=n&&a.loc.end>=n){e=a.name&&a.name.value;break}}}this.handleRunQuery(e)}}},{key:\"_didClickDragBar\",value:function(e){if(0!==e.button||e.ctrlKey)return!1;var t=e.target;if(0!==t.className.indexOf(\"CodeMirror-gutter\"))return!1;for(var r=y.default.findDOMNode(this.resultComponent);t;){if(t===r)return!0;t=t.parentNode}return!1}}]),c}();j.propTypes={fetcher:f.default.func.isRequired,schema:f.default.instanceOf(v.GraphQLSchema),query:f.default.string,variables:f.default.string,operationName:f.default.string,response:f.default.string,storage:f.default.shape({getItem:f.default.func,setItem:f.default.func,removeItem:f.default.func}),defaultQuery:f.default.string,onEditQuery:f.default.func,onEditVariables:f.default.func,onEditOperationName:f.default.func,onToggleDocs:f.default.func,getDefaultFieldNames:f.default.func,editorTheme:f.default.string,onToggleHistory:f.default.func,ResultsTooltip:f.default.any};var G=function(){var e=this;this.handleClickReference=function(t){e.setState({docExplorerOpen:!0},function(){e.docExplorerComponent.showDocForReference(t)})},this.handleRunQuery=function(t){e._editorQueryID++;var r=e._editorQueryID,o=e.autoCompleteLeafs()||e.state.query,n=e.state.variables,i=e.state.operationName;t&&t!==i&&(i=t,e.handleEditOperationName(i));try{e.setState({isWaitingForResponse:!0,response:null,operationName:i});var a=e._fetchQuery(o,n,i,function(t){r===e._editorQueryID&&e.setState({isWaitingForResponse:!1,response:JSON.stringify(t,null,2)})});e.setState({subscription:a})}catch(t){e.setState({isWaitingForResponse:!1,response:t.message})}},this.handleStopQuery=function(){var t=e.state.subscription;e.setState({isWaitingForResponse:!1,subscription:null}),t&&t.unsubscribe()},this.handlePrettifyQuery=function(){var t=e.getQueryEditor();t.setValue((0,v.print)((0,v.parse)(t.getValue())))},this.handleEditQuery=(0,H.default)(100,function(t){var r=e._updateQueryFacts(t,e.state.operationName,e.state.operations,e.state.schema);if(e.setState(l({query:t},r)),e.props.onEditQuery)return e.props.onEditQuery(t)}),this._updateQueryFacts=function(t,r,o,n){var i=(0,k.default)(n,t);if(i){var a=(0,F.default)(o,r,i.operations),s=e.props.onEditOperationName;return s&&r!==a&&s(a),l({operationName:a},i)}},this.handleEditVariables=function(t){e.setState({variables:t}),e.props.onEditVariables&&e.props.onEditVariables(t)},this.handleEditOperationName=function(t){var r=e.props.onEditOperationName;r&&r(t)},this.handleHintInformationRender=function(t){t.addEventListener(\"click\",e._onClickHintInformation);var r=void 0;t.addEventListener(\"DOMNodeRemoved\",r=function(){t.removeEventListener(\"DOMNodeRemoved\",r),t.removeEventListener(\"click\",e._onClickHintInformation)})},this.handleEditorRunQuery=function(){e._runQueryAtCursor()},this._onClickHintInformation=function(t){if(\"typeName\"===t.target.className){var r=t.target.innerHTML,o=e.state.schema;if(o){var n=o.getType(r);n&&e.setState({docExplorerOpen:!0},function(){e.docExplorerComponent.showDoc(n)})}}},this.handleToggleDocs=function(){\"function\"==typeof e.props.onToggleDocs&&e.props.onToggleDocs(!e.state.docExplorerOpen),e.setState({docExplorerOpen:!e.state.docExplorerOpen})},this.handleToggleHistory=function(){\"function\"==typeof e.props.onToggleHistory&&e.props.onToggleHistory(!e.state.historyPaneOpen),e.setState({historyPaneOpen:!e.state.historyPaneOpen})},this.handleSelectHistoryQuery=function(t,r,o){e.handleEditQuery(t),e.handleEditVariables(r),e.handleEditOperationName(o)},this.handleResizeStart=function(t){if(e._didClickDragBar(t)){t.preventDefault();var r=t.clientX-(0,V.getLeft)(t.target),o=function(t){if(0===t.buttons)return n();var o=y.default.findDOMNode(e.editorBarComponent),i=t.clientX-(0,V.getLeft)(o)-r,a=o.clientWidth-i;e.setState({editorFlex:i/a})},n=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){document.removeEventListener(\"mousemove\",o),document.removeEventListener(\"mouseup\",n),o=null,n=null});document.addEventListener(\"mousemove\",o),document.addEventListener(\"mouseup\",n)}},this.handleResetResize=function(){e.setState({editorFlex:1})},this.handleDocsResizeStart=function(t){t.preventDefault();var r=e.state.docExplorerWidth,o=t.clientX-(0,V.getLeft)(t.target),n=function(t){if(0===t.buttons)return i();var r=y.default.findDOMNode(e),n=t.clientX-(0,V.getLeft)(r)-o,a=r.clientWidth-n;a<100?e.setState({docExplorerOpen:!1}):e.setState({docExplorerOpen:!0,docExplorerWidth:Math.min(a,650)})},i=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.state.docExplorerOpen||e.setState({docExplorerWidth:r}),document.removeEventListener(\"mousemove\",n),document.removeEventListener(\"mouseup\",i),n=null,i=null});document.addEventListener(\"mousemove\",n),document.addEventListener(\"mouseup\",i)},this.handleDocsResetResize=function(){e.setState({docExplorerWidth:z})},this.handleVariableResizeStart=function(t){t.preventDefault();var r=!1,o=e.state.variableEditorOpen,n=e.state.variableEditorHeight,i=t.clientY-(0,V.getTop)(t.target),a=function(t){if(0===t.buttons)return s();r=!0;var o=y.default.findDOMNode(e.editorBarComponent),a=t.clientY-(0,V.getTop)(o)-i,u=o.clientHeight-a;u<60?e.setState({variableEditorOpen:!1,variableEditorHeight:n}):e.setState({variableEditorOpen:!0,variableEditorHeight:u})},s=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){r||e.setState({variableEditorOpen:!o}),document.removeEventListener(\"mousemove\",a),document.removeEventListener(\"mouseup\",s),a=null,s=null});document.addEventListener(\"mousemove\",a),document.addEventListener(\"mouseup\",s)}};j.Logo=function(e){return h.default.createElement(\"div\",{className:\"title\"},e.children||h.default.createElement(\"span\",null,\"Graph\",h.default.createElement(\"em\",null,\"i\"),\"QL\"))},j.Toolbar=function(e){return h.default.createElement(\"div\",{className:\"toolbar\"},e.children)},j.QueryEditor=N.QueryEditor,j.VariableEditor=x.VariableEditor,j.ResultViewer=O.ResultViewer,j.Button=E.ToolbarButton,j.ToolbarButton=E.ToolbarButton,j.Group=b.ToolbarGroup,j.Menu=S.ToolbarMenu,j.MenuItem=S.ToolbarMenuItem,j.Select=Q.ToolbarSelect,j.SelectOption=Q.ToolbarSelectOption,j.Footer=function(e){return h.default.createElement(\"div\",{className:\"footer\"},e.children)};var A='# Welcome to GraphiQL\\n#\\n# GraphiQL is an in-browser tool for writing, validating, and\\n# testing GraphQL queries.\\n#\\n# Type queries into this side of the screen, and you will see intelligent\\n# typeaheads aware of the current GraphQL type schema and live syntax and\\n# validation errors highlighted within the text.\\n#\\n# GraphQL queries typically start with a \"{\" character. Lines that starts\\n# with a # are ignored.\\n#\\n# An example GraphQL query might look like:\\n#\\n#     {\\n#       field(arg: \"value\") {\\n#         subField\\n#       }\\n#     }\\n#\\n# Keyboard shortcuts:\\n#\\n#  Prettify Query:  Shift-Ctrl-P (or press the prettify button above)\\n#\\n#       Run Query:  Ctrl-Enter (or press the play button above)\\n#\\n#   Auto Complete:  Ctrl-Space (or just start typing)\\n#\\n\\n';"},"hash":"73bf0605d2d083f21871744b3b1d481a"}